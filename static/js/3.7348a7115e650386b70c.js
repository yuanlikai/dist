webpackJsonp([3],{"078R":function(t,e){},"E4+8":function(t,e){},cwLU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),o=a.n(n),s=void 0,i={name:"TakeVou",data:function(){var t=this;return{modal1:!1,model3:"",model4:"",columns2:[{title:"数量",key:"num"},{title:"架位",key:"in_kno"},{title:"操作",key:"sheet_no",render:function(e,a){return e("div",[e("Button",{props:{type:"dashed",size:"small",disabled:t.disabled},on:{click:function(){t.remove(a.index)}}},"Delete")])}}],data2:[],cityList:[],model6:"",single:!1,user:{},total:1,page:0,lodaing:!0,loadinga:!0,loadingb:!0,value2:0,modal6:!1,modal5:!1,kno:"",head:"",desl:"",value3:"",serial:"",Untreateda:"",Untreated:"",columns1:[{title:"产品编号",key:"serial_no"},{title:"名称",key:"book_name",width:"20%"},{title:"分类",key:"booktype_name"},{title:"规格",key:"bind_name"},{title:"单位",key:"book_property"},{title:"数量",key:"num1"},{title:"货架",key:"kno",render:function(t,e){var a=e.row.serial_no,n=[];if(null!=s){for(var o=0;o<s.length;o++)s[o].serial_no==a&&n.push(s[o].kno);return n.join("，")}}},{title:"留档",key:"kno",render:function(t,e){return""==e.row.kno?t("div",[t("Icon",{props:{type:"ios-analytics-outline"},style:{fontSize:"16px"}})]):t("div",[t("Icon",{props:{type:"checkmark"},style:{fontSize:"16px"}})])}}],data1:[],disabled:!1}},methods:{climod:function(){this.model4=this.model4.replace(/[^\d.]/g,"")},titlOk:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/ConfirmOnShelf",t.Qs.stringify({sheet_no:t.$route.query.sheet_no})).then(function(e){0!=e.data.error?t.$Message.error(e.data.errorMsg):(t.$Message.success("提交成功"),t.disabled=!0,t.modal1=!1)})},subinco:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/NextOnShelf",t.Qs.stringify({sheet_no:t.$route.query.sheet_no})).then(function(e){if(0==e.data.error)t.modal1=!0;else{t.$Message.config({duration:3});for(var a=e.data.errorMsg.split("：")[1].split("、"),n=0,o=0;o<a.length;o++)!function(e){setTimeout(function(){t.$Message.error(a[e])},n),n+=300}(o)}}).catch(function(){t.$emit("error","对方不想说话，并且向你抛出了一个异常")})},remove:function(t){this.data2.splice(t,1),this.peid()},deslOK:function(){for(var t=this,e=t.data2,a=[],n=0;n<e.length;n++)a.push({kno:e[n].in_kno,num:e[n].num});t.Axios.post("http://116.247.103.119/imt16webapi/sheets/OnShelfKnos",t.Qs.stringify({sheet_no:t.$route.query.sheet_no,serial_no:t.desl.serial_no,knonumlist:o()({KnoNum:a})})).then(function(e){0!=e.data.error?(t.$Message.error(e.data.errorMsg),t.loadingb=!1):(t.$Message.success("提交成功"),t.InStock(t.page),t.modal5=!1),setTimeout(function(){t.loadingb=!0},0)})},teblcli:function(t){var e=this;e.desl=t,e.modal5=!0,e.Axios.post("http://116.247.103.119/imt16webapi/sheets/getOnshelfKno",e.Qs.stringify({sheet_no:e.$route.query.sheet_no,serial_no:t.serial_no})).then(function(t){e.modal5=!0,e.data2=[],e.model4="",e.model3="","000"!=t.data.data[0].in_kno&&(e.data2=t.data.data),e.peid()}).catch(function(){e.$emit("error","对方不想说话，并且向你抛出了一个异常")})},InStock:function(t){var e=this;e.lodaing=!0,e.Axios.post("http://116.247.103.119/imt16webapi/sheets/GetOnShelfNew",e.Qs.stringify({sheet_no:e.$route.query.sheet_no,pagenum:t,pagesize:10})).then(function(t){0!=t.data.error?e.$emit("error",String(t.data.errorMsg)):(s=t.data.data.knolist,e.data1=t.data.data.detail,e.total=t.data.total,e.Untreated=t.data.Untreated,e.lodaing=!1,e.head=t.data.data.head[0],"2"!=t.data.data.head[0].status?e.disabled=!1:e.disabled=!0)}).catch(function(t){e.$emit("error","对方不想说话，并且向你抛出了一个异常")})},addLIS:function(){var t=this;""==t.model4?t.$Message.error("新增数量不可为空"):""==t.model3?t.$Message.error("新增架位不可为空"):(t.data2.push({num:t.model4,in_kno:t.model3,sheet_no:"1"}),t.model4="",t.model3="",t.peid())},asyncOK:function(){var t=this,e=0;e=0==t.single?0:1,t.Axios.post("http://116.247.103.119/imt16webapi/sheets/OnShelfAll",t.Qs.stringify({sheet_no:t.$route.query.sheet_no,kno:t.model6,isall:e})).then(function(e){0!=e.data.error?(t.$emit("error",String(e.data.errorMsg)),t.loadinga=!1):(t.InStock(1),t.modal6=!1,t.$Message.success("统一架位成功")),setTimeout(function(){t.loadinga=!0},0)}).catch(function(e){t.$emit("error","对方不想说话，并且向你抛出了一个异常")})},tonyh:function(){this.modal6=!0},knolis:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/GetKno",t.Qs.stringify({bookstore_name:t.user.bookstore_name})).then(function(e){if(0!=e.data.error)t.$emit("error",String(e.data.errorMsg));else{var a=e.data.data;t.cityList=[];for(var n=0;n<a.length;n++)t.cityList.push({value:a[n].kno,label:a[n].kno})}}).catch(function(e){t.$emit("error","对方不想说话，并且向你抛出了一个异常")})},peid:function(){for(var t=this.data2,e=this.cityList,a=0;a<e.length;a++)e[a].str=!1;for(var n=0;n<t.length;n++)for(var o=0;o<e.length;o++)e[o].label==t[n].in_kno&&(e[o].str=!0);this.cityList=e},pagecli:function(t){this.page=t,this.InStock(this.page)},bacl:function(t){this.user=t}},mounted:function(){this.knolis(),this.InStock(1)}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("my-head",{on:{back:t.bacl}}),t._v(" "),a("Content",{style:{padding:"0 50px"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"20",push:"4",type:"flex",justify:"end"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[a("span",{staticStyle:{"margin-right":"40px","font-size":"14px"}},[t._v("入库单："+t._s(t.head.sheet_no))]),t._v(" "),a("span",{staticStyle:{"margin-right":"40px","font-size":"14px"}},[t._v("供应商："+t._s(t.head.publisher_no))]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px","font-size":"14px"},domProps:{textContent:t._s(void 0!=t.head.dt?"收货时间："+t.head.dt.split("T")[0]:"")}})])],1),t._v(" "),a("Col",{attrs:{span:"4",pull:"20"}},[a("Breadcrumb",{style:{margin:"20px 0"}},[a("BreadcrumbItem",{attrs:{to:"/Inco"}},[t._v("入库单")]),t._v(" "),a("BreadcrumbItem",[t._v("产品详情")])],1)],1)],1),t._v(" "),a("Card",{staticStyle:{padding:"0"}},[a("div",[a("Table",{staticStyle:{height:"520px"},attrs:{loading:t.lodaing,border:"",stripe:"",columns:t.columns1,data:t.data1},on:{"on-row-click":t.teblcli}})],1),t._v(" "),a("Row",{staticClass:"code-row-bg",staticStyle:{"margin-top":"16px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"8"}},[a("Button",{staticStyle:{"padding-left":"30px","padding-right":"30px","margin-right":"30px"},attrs:{disabled:t.disabled,type:"warning"},on:{click:t.tonyh}},[t._v("\n                        统一货架\n                    ")]),t._v(" "),a("Button",{staticStyle:{"padding-left":"30px","padding-right":"30px"},attrs:{disabled:t.disabled,type:"primary"},on:{click:t.subinco}},[a("span",[t._v("提交入库")])])],1),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[a("Col",{staticStyle:{margin:"4px 15px 0  0"}},[t._v("\n                        共"),a("span",{staticStyle:{color:"#D72236","font-size":"18px","font-weight":"700"}},[t._v(" "+t._s(t.total)+" ")]),t._v("条数据，有"),a("span",{staticStyle:{color:"#D72236","font-size":"18px","font-weight":"700"}},[t._v(" "+t._s(t.Untreated)+" ")]),t._v("条待上架产品\n                        ")]),t._v(" "),a("Page",{staticStyle:{float:"right"},attrs:{total:t.total,"page-size":10},on:{"on-change":t.pagecli}})],1)],1)],1)],1)],1),t._v(" "),a("Footer",{staticClass:"layout-footer-center",staticStyle:{"text-align":"center"}},[t._v("2011-2018 © 怡乐仓库")])],1),t._v(" "),a("Modal",{attrs:{title:"提示",loading:t.loadinga,styles:{width:"700px"}},on:{"on-ok":t.asyncOK},model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[a("Row",{staticStyle:{padding:"0 20px","font-size":"13px"}},[a("Col",{attrs:{span:"6"}},[t._v("\n            送货单号："+t._s(t.head.associate_noY))]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("\n            产品号："+t._s(t.head.sheet_no))]),t._v(" "),a("Col",{attrs:{span:"5"}},[t._v("\n            品种数量："+t._s(t.head.pz_nums))]),t._v(" "),a("Col",{attrs:{span:"7"}},[t._v("\n            收货时间："+t._s(""!=t.head?t.head.dt.split("T")[0]:"")+"\n            ")])],1),t._v(" "),a("Row",{staticStyle:{padding:"0 20px"}},[a("Col",{staticClass:"tatltdbig",staticStyle:{"text-align":"center",padding:"100px 0"},attrs:{span:"24"}},[t._v("\n            统一架位：\n            "),a("Select",{staticStyle:{width:"200px","margin-right":"10px"},model:{value:t.model6,callback:function(e){t.model6=e},expression:"model6"}},t._l(t.cityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),a("Checkbox",{model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[t._v("覆盖已填写架位")])],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"提示",loading:t.loadingb,"class-name":"vertical-center-modal",styles:{width:"400px"}},on:{"on-ok":t.deslOK},model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("Row",{staticStyle:{padding:"0  30px"}},[a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            产品编号： "+t._s(t.desl.serial_no))]),t._v(" "),a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            名称： "+t._s(t.desl.book_name))]),t._v(" "),a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            类型： "+t._s(t.desl.booktype_name))]),t._v(" "),a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            单位： "+t._s(t.desl.book_property))]),t._v(" "),a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            规格： "+t._s(t.desl.bind_name))]),t._v(" "),a("Col",{staticStyle:{"font-size":"14px","margin-bottom":"12px"},attrs:{span:"24"}},[t._v("\n            数量： "+t._s(t.desl.num1))])],1),t._v(" "),a("Row",{staticStyle:{padding:"0  30px"}},[a("Row",{staticStyle:{padding:"12px 0",border:"1px dashed #e9eaec","border-left":"none","border-right":"none"}},[a("Row",[a("Col",{staticStyle:{"margin-bottom":"15px"},attrs:{span:"8"}},[a("Input",{staticStyle:{width:"80px"},attrs:{disabled:t.disabled,placeholder:"数量"},on:{"on-keyup":t.climod},model:{value:t.model4,callback:function(e){t.model4=e},expression:"model4"}})],1),t._v(" "),a("Col",{staticStyle:{"margin-bottom":"15px"},attrs:{span:"8"}},[a("Select",{staticStyle:{width:"100px"},attrs:{disabled:t.disabled},model:{value:t.model3,callback:function(e){t.model3=e},expression:"model3"}},t._l(t.cityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value,disabled:e.str}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])}))],1),t._v(" "),a("Col",{staticStyle:{"margin-bottom":"15px","text-align":"center"},attrs:{span:"8"}},[a("Button",{attrs:{type:"dashed",disabled:t.disabled},on:{click:t.addLIS}},[t._v("添加")])],1)],1),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns2,data:t.data2}})],1),t._v(" "),a("router-link",{attrs:{to:{path:"IncoPhoto",query:{associate_noY:t.$route.query.sheet_no,SubAssociate_no:t.desl.serial_no}}}},[a("Button",{staticStyle:{"margin-top":"15px"},attrs:{type:"warning"}},[t._v("照片留档")])],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"提示",loading:!0},on:{"on-ok":t.titlOk},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticStyle:{"text-align":"center","font-size":"13px",padding:"50px"}},[a("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"alert",size:"16"}}),t._v("\n            是否要将订单 <"+t._s(t.$route.query.sheet_no)+"> 确认收货，一旦提交将无法修改\n        ")],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(i,l,!1,function(t){a("E4+8"),a("078R")},null,null);e.default=r.exports}});
//# sourceMappingURL=3.7348a7115e650386b70c.js.map