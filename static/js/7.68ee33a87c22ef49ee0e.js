webpackJsonp([7],{"4mgG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),o={name:"TakeVou",data:function(){this.$createElement;return{fruit:[],labels:[],user:{},total:1,page:0,head:"",Title:"",lodaing:!0,value2:0,value3:"",modal6:!1,modal1:!1,loading:!0,loading2:!0,serial:"",Untreated:"",columns1:[{title:"产品编号",key:"serial_no"},{title:"名称",key:"book_name",width:"20%"},{title:"分类",key:"booktype_name"},{title:"规格",key:"bind_name"},{title:"单位",key:"book_propertyName"},{title:"应收",key:"receivable_num"},{title:"实收",key:"num1",render:function(t,e){return-.1==e.row.num1?"":e.row.num1}},{title:"差异",key:"num",render:function(t,e){return-.1===e.row.num1?"":e.row.receivable_num==e.row.num1?t("p",{class:"ivu-icon ivu-icon-checkmark",style:"cursor: pointer;font-size:14px"},[]):e.row.error_num}}],data1:[],disabled:!0}},methods:{getdifftxt:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/currency/getdifftxt",t.Qs.stringify({type:"进货验收"})).then(function(e){t.labels=e.data.data})},titlOk:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/ConfirmInStock",t.Qs.stringify({associate_no:t.$route.query.associate_n,memo:"",Consignee:t.user.work_no})).then(function(e){0!=e.data.error?t.$Message.error(e.data.errorMsg):(t.disabled=!0,t.modal1=!1,t.$Message.success("提交成功"))})},toLoading2:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/NextInStock",t.Qs.stringify({associate_no:t.$route.query.associate_n})).then(function(e){if(0==e.data.error)t.modal1=!0;else{t.$Message.config({duration:3});for(var a=e.data.errorMsg.split("：")[1].split("、"),s=0,i=0;i<a.length;i++)!function(e){setTimeout(function(){t.$Message.error(a[e])},s),s+=300}(i)}}).catch(function(){t.$Message.error("对方不想说话，并且向你抛出了一个异常")})},InStock:function(t){var e=this;e.lodaing=!0,e.Axios.post("http://116.247.103.119/imt16webapi/sheets/GetInStockNewNoby",e.Qs.stringify({associate_no:e.$route.query.associate_n,pagenum:t,pagesize:10})).then(function(t){0!=t.data.error?e.$emit("error",String(t.data.errorMsg)):(e.head=t.data.data.orpptb20,e.data1=t.data.data.resultorpptb22,e.total=t.data.total,e.lodaing=!1,e.Untreated=t.data.Untreated,1==t.data.data.orpptb20.status?e.disabled=!1:e.disabled=!0)}).catch(function(){e.$Message.error("对方不想说话，并且向你抛出了一个异常")})},asyncOK:function(){var t=this;t.Axios.post("http://116.247.103.119/imt16webapi/sheets/SingleInStock",t.Qs.stringify({associate_no:t.$route.query.associate_n,serial_no:t.serial,num1:t.value2,memo:t.value3+"@#$%~"+i()(t.fruit)+" ",oper_no:t.user.member_no,validity_dt:""})).then(function(e){0!=e.data.error?(t.$Message.error(e.data.errorMsg),t.loading=!1):(t.InStock(t.page),t.modal6=!1,t.$Message.success("提交成功")),setTimeout(function(){t.loading=!0},0)})},teblcli:function(t){-.1===t.num1?this.value2=t.num:this.value2=t.num1,null!=t.Remarks?(this.value3=t.Remarks.split("@#$%~")[0],void 0!==t.Remarks.split("@#$%~")[1]&&(this.fruit=JSON.parse(t.Remarks.split("@#$%~")[1]))):(this.fruit=[],this.value3=""),this.modal6=!0,this.serial=t.serial_no,this.Title="审核数量 / "+t.serial_no},pagecli:function(t){this.page=t,this.InStock(this.page)},bacl:function(t){this.user=t}},mounted:function(){this.InStock(1),this.$emit(""),this.getdifftxt()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("my-head",{on:{back:t.bacl}}),t._v(" "),a("Content",{style:{padding:"0 50px"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"20",push:"4",type:"flex",justify:"end"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[a("span",{staticStyle:{"margin-right":"40px","font-size":"14px"}},[t._v("单据号："+t._s(t.head.associate_no))]),t._v(" "),a("span",{staticStyle:{"margin-right":"40px","font-size":"14px"}},[t._v("供应商："+t._s(t.head.publisher_no))]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px","font-size":"14px"},domProps:{textContent:t._s(void 0!=t.head.dt?"制单时间："+t.head.dt.split("T")[0]:"")}})])],1),t._v(" "),a("Col",{attrs:{span:"4",pull:"20"}},[a("Breadcrumb",{style:{margin:"20px 0"}},[a("BreadcrumbItem",{attrs:{to:"/Take"}},[t._v("收货单")]),t._v(" "),a("BreadcrumbItem",[t._v("产品详情")])],1)],1)],1),t._v(" "),a("Card",{staticStyle:{padding:"0"}},[a("div",[a("Table",{staticStyle:{height:"520px"},attrs:{loading:t.lodaing,border:"",stripe:"",columns:t.columns1,data:t.data1},on:{"on-row-click":t.teblcli}})],1),t._v(" "),a("Row",{staticClass:"code-row-bg",staticStyle:{"margin-top":"16px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"8"}},[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{path:"TakePhoto",query:{associate_n:t.$route.query.associate_n}}}},[a("Button",{staticStyle:{"padding-left":"30px","padding-right":"30px","margin-right":"30px"},attrs:{type:"warning"}},[t._v("\n                            拍照留档\n                        ")])],1),t._v(" "),a("Button",{staticStyle:{"padding-left":"30px","padding-right":"30px"},attrs:{disabled:t.disabled,type:"primary"},on:{click:t.toLoading2}},[a("span",[t._v("确认收货")])])],1),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[a("Col",{staticStyle:{margin:"4px 15px 0  0"}},[t._v("\n                        共"),a("span",{staticStyle:{color:"#D72236","font-size":"18px","font-weight":"700"}},[t._v(" "+t._s(t.total)+" ")]),t._v("条数据，有"),a("span",{staticStyle:{color:"#D72236","font-size":"18px","font-weight":"700"}},[t._v(" "+t._s(t.Untreated)+" ")]),t._v("条待上架产品\n                        ")]),t._v(" "),a("Page",{staticStyle:{float:"right"},attrs:{total:t.total,"page-size":10},on:{"on-change":t.pagecli}})],1)],1)],1)],1)],1),t._v(" "),a("Footer",{staticClass:"layout-footer-center",staticStyle:{"text-align":"center"}},[t._v("2011-2018 © 怡乐仓库")]),t._v(" "),a("Modal",{attrs:{title:t.Title,loading:t.loading},on:{"on-ok":t.asyncOK},model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[a("div",[a("Row",{staticClass:"code-row-bg",staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("Row",{attrs:{type:"flex",justify:"end"}},[t._v("实收数：")])],1),t._v(" "),a("Col",{attrs:{span:"18"}},[a("InputNumber",{staticStyle:{width:"150px"},attrs:{disabled:t.disabled,step:1,min:0},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1)],1),t._v(" "),a("Row",{staticClass:"code-row-bg",staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("Row",{attrs:{type:"flex",justify:"end"}},[t._v("差异原因：")])],1),t._v(" "),a("Col",{attrs:{span:"18"}},[a("CheckboxGroup",{model:{value:t.fruit,callback:function(e){t.fruit=e},expression:"fruit"}},[t._l(t.labels,function(e){return[a("Checkbox",{attrs:{label:e.reason,disabled:t.disabled}})]})],2)],1)],1),t._v(" "),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("Row",{attrs:{type:"flex",justify:"end"}})],1),t._v(" "),a("Col",{attrs:{span:"18"}},[a("Input",{attrs:{disabled:t.disabled,maxlength:100,type:"textarea",rows:4,placeholder:"Enter something..."},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1)],1)],1)]),t._v(" "),a("Modal",{attrs:{title:"提示",loading:t.loading2},on:{"on-ok":t.titlOk},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticStyle:{"text-align":"center","font-size":"13px",padding:"50px"}},[a("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"alert",size:"16"}}),t._v("\n                是否要将订单 <"+t._s(t.$route.query.associate_n)+"> 确认收货，一旦提交将无法修改\n            ")],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("nrTC")},null,null);e.default=r.exports},nrTC:function(t,e){}});
//# sourceMappingURL=7.68ee33a87c22ef49ee0e.js.map